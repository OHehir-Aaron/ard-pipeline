[ancillary]
anci_root = /g/data/v10/eoancillarydata
ephem_data_root = %(anci_root)s/ephemeris_kill
aerosol_path = %(anci_root)s/aerosol/AATSR/2.0/aerosol.h5
brdf_path = /g/data/u39/public/data/modis/lpdaac-mosaics-cmar/v1-hdf4/aust/MCD43A1.005
brdf_premodis_path = /g/data/v10/brdf-jl/data
dem_path = %(anci_root)s/elevation/world_1deg
dem_tc = %(anci_root)s/elevation/tc_aus_3sec/dsm1sv1_0_Clean.img
ozone_path = %(anci_root)s/lookup_tables/ozone
satfilter_path = %(anci_root)s/lookup_tables/satellite_filter
solarirrad_path = %(anci_root)s/lookup_tables/solar_irradiance
vapour_path = %(anci_root)s/water_vapour
landsea_path = %(anci_root)s/Land_Sea_Rasters
sundist_path = %(anci_root)s/lookup_tables/earthsun_distance/EarthSun_distanceLUT.txt
modtran_profile_path = %(anci_root)s/lookup_tables/default_profile

[work]
dem_target = elevation.pkl
ozone_target = ozone.pkl
irrad_target = irrad.pkl
sundist_target = sundist.pkl
vapour_target = vapour.pkl
brdf_target = brdf.pkl
aerosol_target = aerosol.pkl
metadata_target = metadata.yml
lon_grid_target = LON.bin
lat_grid_target = LAT.bin
sat_filter_target = SATELLITEFILTER
sat_view_target = SATELLITE_VIEW.bin
sat_azimuth_target = SATELLITE_AZIMUTH.bin
solar_zenith_target = SOLAR_ZENITH.bin
solar_azimuth_target = SOLAR_AZIMUTH.bin
relative_azimuth_target = RELATIVE_AZIMUTH.bin
time_target = TIME.bin
centreline_target = CENTRELINE
header_angle_target = HEADERANGLE
coordinator_target = COORDINATOR
boxline_target = BOXLINE
modtran_input_target = MODTRANINPUT
read_modtrancor_ortho_cwd = mod
input_modtran_cwd = mod
reformat_tp5_cwd = mod
reformat_tp5_trans_cwd = mod
modtran_root = mod
bilinear_outputs_target = bilinear_ortho_outputs.pkl
tc_intermediates = TC_Intermediates
rfl_output_dir = Reflectance_Outputs
header_slope_target = SLOPE_ANGLE_INPUTS
x_tile_size = -1
y_tile_size = 100

[brdf]
factor = 1.0
modis_brdf_format = brdf_modis_band_{band_num}.txt
new_modis_brdf_format = new_brdf_modis_band_{band_num}.txt

[modtran]
root = /projects/u46/opt/modules/MODTRAN/5.2.1
exe = %(root)s/Mod90_5.2.1_ifort.exe
profile_format = {profile}.tp5
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
albedos = 0,1,t
workpath_format = {coord}/alb_{albedo}
input_format = %(workpath_format)s/mod5root.in
flx_output_format = %(workpath_format)s/{coord}_alb_{albedo}.flx
chn_output_format = %(workpath_format)s/{coord}_alb_{albedo}.chn

[input_modtran]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
albedos = 0,1
output_format = {coord}_alb_{albedo}.txt

[reformat_tp5]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
albedos = 0,1
input_format = {coord}_alb_{albedo}.txt
output_format = {coord}/alb_{albedo}/{coord}_alb_{albedo}.tp5

[reformat_tp5_trans]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
albedos = t
input_format = {coord}_alb_0.txt
output_format = {coord}/alb_{albedo}/{coord}_alb_{albedo}.tp5

[extract_flux]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
albedos = 0,1
input_format = {coord}/alb_{albedo}/{coord}_alb_{albedo}.flx
output_format = {coord}_alb_{albedo}.dir

[extract_flux_trans]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
input_format = {coord}/alb_t/{coord}_alb_t.flx
output_format = {coord}_alb_t.dir

[coefficients]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
chn_input_format = {coord}/alb_{albedo}/{coord}_alb_{albedo}.chn
dir_input_format = {coord}_alb_{albedo}.dir
output_format = {coord}_alb.txt

[read_modtran]
coords = TL,TM,TR,ML,MM,MR,BL,BM,BR
factors = fv,fs,b,s,a,dir,dif,ts
input_format = {coord}_alb.txt
output_format = {factor}_out_b_{band}.txt

[bilinear]
factors = fv,fs,b,s,a,dir,dif,ts
input_format = {factor}_out_b_{band}.txt
output_format = {factor}_band{band}.bin

[extract_dsm]
dsm_subset = dsm_subset.bin
dsm_smooth_subset = dsm_subset_smoothed.bin
dsm_buffer_width = 250

[self_shadow]
self_shadow_target = self_shadow_mask.bin
slope_target = slope.bin
aspect_target = aspect.bin
incident_target = incident_angle.bin
exiting_target = exiting_angle.bin
azimuth_incident_target = azimuth_incident_angle.bin
azimuth_exiting_target = azimuth_exiting_angle.bin
relative_slope_target = relative_slope.bin

[cast_shadow]
sun_direction_target = cast_shadow_sun.bin
satellite_direction_target = cast_shadow_satellite.bin

[terrain_correction]
shadow_sub_matrix_height = 500
shadow_sub_matrix_width = 500
rori = 0.52
rfl_levels = reflectance_lambertian,reflectance_brdf,reflectance_terrain
output_format = {level}_{band}.bin

[cleanup]
remove_intermediates = 1
rfl_levels = reflectance_lambertian,reflectance_brdf
remove_reflectance = 1

[core]
logging_conf_file: /projects/u46/opt/modules/gaip/test-aerosol-hdf5/ga-neo-landsat-processor/workflow/logging.cfg
